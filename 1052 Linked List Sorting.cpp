#include <bits/stdc++.h>using namespace std;/*	有无用节点，需要先清除，再排序 */typedef struct node {	int add, key, next;} Node;Node num[1000005];Node ne[1000005];int ct;bool cmp(const Node a, const Node b){	return a.key < b.key;}int n, start;int main() {	scanf("%d %d", &n, &start);	int add, key, next;	for (int i = 0; i < n; ++i){		scanf("%d %d %d", &add, &key, &next);		num[add].add = add;		num[add].key = key;		num[add].next = next;	}	int now = start;	while (now != -1){		ne[ct++] = num[now];		now = num[now].next;	}	sort(ne, ne+ct, cmp);	if (ct == 0) printf("0 -1\n");	else {		printf("%d %05d\n", ct, ne[0].add);		for (int i = 0; i < ct-1; ++i){			printf("%05d %d %05d\n", ne[i].add, ne[i].key, ne[i+1].add);		}		printf("%05d %d -1\n", ne[ct-1].add, ne[ct-1].key);	}	return 0;}